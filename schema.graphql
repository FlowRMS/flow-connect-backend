input AddressInput {
  companyId: UUID!
  addressType: AddressType!
  addressLine1: String = null
  addressLine2: String = null
  city: String = null
  state: String = null
  zipCode: String = null
}

type AddressResponse {
  id: UUID!
  createdAt: datetime!
  companyId: UUID!
  addressType: AddressType!
  addressLine1: String
  addressLine2: String
  city: String
  state: String
  zipCode: String
}

enum AddressType {
  BILLING
  SHIPPING
  OTHER
}

enum CRMEntityType {
  JOB
  TASK
  CONTACT
  COMPANY
  NOTE
  PRE_OPPORTUNITY
  QUOTE
  ORDER
  INVOICE
  CHECK
  FACTORY
  CUSTOMER
  PRODUCT
}

type CheckResponse {
  id: UUID!
  entryDate: datetime!
  checkNumber: String!
  entityDate: Date!
  postDate: Date
  commissionMonth: Date
  commission: Decimal!
  factoryId: UUID!
  userOwnerIds: [UUID!]!
  status: Int!
  createdBy: UUID!
  creationType: Int!
}

input CompanyInput {
  name: String!
  companySourceType: CompanyType!
  website: String
  phone: String
  tags: [String!]
  parentCompanyId: UUID
}

type CompanyLandingPage implements LandingPageInterfaceBase {
  id: UUID!
  createdAt: datetime!
  createdBy: String!
  name: String!
  companySourceType: String!
  website: String
  phone: String
}

type CompanyResponse {
  id: UUID!
  createdAt: datetime!
  name: String!
  companySourceType: CompanyType!
  website: String
  phone: String
  tags: [String!]
  parentCompanyId: UUID
  createdBy: UserResponse!
}

enum CompanyType {
  CUSTOMER
  MANUFACTURER
}

input ContactInput {
  firstName: String!
  lastName: String!
  email: String
  phone: String
  role: String
  territory: String
  tags: [String!]
  notes: String
  companyId: UUID
}

type ContactLandingPage implements LandingPageInterfaceBase {
  id: UUID!
  createdAt: datetime!
  createdBy: String!
  firstName: String!
  lastName: String!
  email: String
  phone: String
  role: String
  companyName: String
}

type ContactResponse {
  id: UUID!
  createdAt: datetime!
  firstName: String!
  lastName: String!
  email: String
  phone: String
  role: String
  territory: String
  tags: [String!]
  notes: String
  companyId: UUID
}

type CustomerResponse {
  id: UUID!
  companyName: String!
  parentId: UUID
  insideRepId: UUID
}

"""Date (isoformat)"""
scalar Date

scalar Decimal

input DeleteLinkByEntitiesInput {
  sourceEntityType: CRMEntityType!
  sourceEntityId: UUID!
  targetEntityType: CRMEntityType!
  targetEntityId: UUID!
}

type FactoryResponse {
  id: UUID!
  title: String!
}

input Filter {
  columnName: String!
  operator: FilterOperator!
  value: String = null
  values: [String!] = null
}

enum FilterOperator {
  EQ
  NE
  GT
  GTE
  LT
  LTE
  LIKE
  ILIKE
  BEGINS_WITH
  ENDS_WITH
  IN
  NOT_IN
  IS_NULL
  IS_NOT_NULL
}

type GenericLandingPage {
  records: [LandingRecord!]!
  total: Int!
}

type GmailConnectionResultType {
  success: Boolean!
  googleEmail: String
  error: String
}

type GmailConnectionStatusType {
  isConnected: Boolean!
  googleEmail: String
  expiresAt: datetime
  lastUsedAt: datetime
}

input GmailSendEmailInput {
  to: [String!]!
  subject: String!
  body: String!
  bodyType: String! = "HTML"
  cc: [String!] = null
  bcc: [String!] = null
}

type GmailSendEmailResultType {
  success: Boolean!
  messageId: String
  error: String
}

type InvoiceResponse {
  id: UUID!
  entryDate: datetime!
  invoiceNumber: String!
  entityDate: Date!
  dueDate: Date
  factoryId: UUID
  orderId: UUID!
  userOwnerIds: [UUID!]!
  status: Int!
  published: Boolean!
  locked: Boolean!
  createdBy: UUID!
  creationType: Int!
  balanceId: UUID!
}

input JobInput {
  jobName: String!
  statusId: UUID!
  startDate: Date
  endDate: Date
  jobOwnerId: UUID
  description: String
  jobType: String
  structuralDetails: String
  structuralInformation: String
  additionalInformation: String
  requesterId: UUID
  tags: [String!]
}

type JobLandingPage implements LandingPageInterfaceBase {
  id: UUID!
  createdAt: datetime!
  createdBy: String!
  jobName: String!
  statusName: String!
  startDate: Date
  endDate: Date
  description: String
  jobType: String
  requester: String
  jobOwner: String
  tags: [String!]
}

type JobRelatedEntitiesResponse {
  preOpportunities: [PreOpportunityLiteResponse!]!
  contacts: [ContactResponse!]!
  companies: [CompanyResponse!]!
  quotes: [QuoteResponse!]!
  orders: [OrderResponse!]!
  invoices: [InvoiceResponse!]!
  checks: [CheckResponse!]!
  factories: [FactoryResponse!]!
  products: [ProductResponse!]!
  customers: [CustomerResponse!]!
}

type JobStatusType {
  id: UUID!
  name: String!
}

type JobType {
  id: UUID!
  createdAt: datetime!
  jobName: String!
  startDate: Date
  endDate: Date
  description: String
  jobType: String
  structuralDetails: String
  structuralInformation: String
  additionalInformation: String
  requesterId: UUID
  tags: [String!]
  status: JobStatusType!
  createdBy: UserResponse!
}

interface LandingPageInterfaceBase {
  id: UUID!
  createdAt: datetime!
  createdBy: String!
}

union LandingRecord = JobLandingPage | CompanyLandingPage | ContactLandingPage | PreOpportunityLandingPage | NoteLandingPage | TaskLandingPage

enum LandingSourceType {
  JOBS
  COMPANIES
  CONTACTS
  TASKS
  NOTES
  PRE_OPPORTUNITIES
}

input LinkRelationInput {
  sourceEntityType: CRMEntityType!
  sourceEntityId: UUID!
  targetEntityType: CRMEntityType!
  targetEntityId: UUID!
}

type LinkRelationType {
  id: UUID!
  sourceEntityType: CRMEntityType!
  sourceEntityId: UUID!
  targetEntityType: CRMEntityType!
  targetEntityId: UUID!
  createdAt: datetime!
}

type Mutation {
  createAddress(input: AddressInput!): AddressResponse!
  deleteAddress(id: UUID!): Boolean!
  createCompany(input: CompanyInput!): CompanyResponse!
  deleteCompany(id: UUID!): Boolean!
  updateCompany(id: UUID!, input: CompanyInput!): CompanyResponse!
  createContact(input: ContactInput!): ContactResponse!
  deleteContact(id: UUID!): Boolean!
  updateContact(id: UUID!, input: ContactInput!): ContactResponse!
  gmailConnect(code: String!): GmailConnectionResultType!
  gmailDisconnect: Boolean!
  gmailSendEmail(input: GmailSendEmailInput!): GmailSendEmailResultType!
  o365Connect(code: String!): O365ConnectionResultType!
  o365Disconnect: Boolean!
  o365SendEmail(input: O365SendEmailInput!): O365SendEmailResultType!
  createJob(input: JobInput!): JobType!
  updateJob(id: UUID!, input: JobInput!): JobType!
  deleteJob(id: UUID!): Boolean!
  createLink(input: LinkRelationInput!): LinkRelationType!
  deleteLink(id: UUID!): Boolean!
  deleteLinkByEntities(input: DeleteLinkByEntitiesInput!): Boolean!
  createNote(input: NoteInput!): NoteType!
  updateNote(id: UUID!, input: NoteInput!): NoteType!
  deleteNote(id: UUID!): Boolean!
  addNoteConversation(input: NoteConversationInput!): NoteConversationType!
  updateNoteConversation(noteConversationId: UUID!, input: NoteConversationInput!): NoteConversationType!
  deleteNoteConversation(conversationId: UUID!): Boolean!
  deleteNoteConversations(noteId: UUID!): Boolean!
  createPreOpportunity(input: PreOpportunityInput!): PreOpportunityResponse!
  updatePreOpportunity(input: PreOpportunityInput!): PreOpportunityResponse!
  deletePreOpportunity(id: UUID!): Boolean!
  createTask(input: TaskInput!): TaskType!
  updateTask(id: UUID!, input: TaskInput!): TaskType!
  deleteTask(id: UUID!): Boolean!
  addTaskConversation(input: TaskConversationInput!): TaskConversationType!
  updateTaskConversation(id: UUID!, input: TaskConversationInput!): TaskConversationType!
  deleteTaskConversation(id: UUID!): Boolean!
}

input NoteConversationInput {
  noteId: UUID!
  content: String!
}

type NoteConversationType {
  id: UUID!
  createdAt: datetime!
  noteId: UUID!
  content: String!
}

input NoteInput {
  title: String!
  content: String!
  tags: [String!]
  mentions: [UUID!]
}

type NoteLandingPage implements LandingPageInterfaceBase {
  id: UUID!
  createdAt: datetime!
  createdBy: String!
  title: String!
  content: String!
  tags: [String!]
  mentions: [UUID!]
  linkedTitles: [String!]!
}

type NoteRelatedEntitiesResponse {
  jobs: [JobType!]!
  tasks: [TaskType!]!
  contacts: [ContactResponse!]!
  companies: [CompanyResponse!]!
  preOpportunities: [PreOpportunityLiteResponse!]!
  quotes: [QuoteResponse!]!
  orders: [OrderResponse!]!
  invoices: [InvoiceResponse!]!
  checks: [CheckResponse!]!
  factories: [FactoryResponse!]!
  products: [ProductResponse!]!
  customers: [CustomerResponse!]!
}

type NoteType {
  id: UUID!
  createdAt: datetime!
  title: String!
  content: String!
  tags: [String!]
  mentions: [UUID!]
  createdBy: UserResponse!
}

type O365CalendarAttendeeType {
  email: String!
  name: String
  responseStatus: String
}

type O365CalendarEventType {
  id: String!
  subject: String!
  start: datetime!
  end: datetime!
  isAllDay: Boolean!
  location: String
  bodyPreview: String
  organizerEmail: String
  organizerName: String
  attendees: [O365CalendarAttendeeType!]
  webLink: String
  isCancelled: Boolean!
}

type O365CalendarEventsResultType {
  success: Boolean!
  events: [O365CalendarEventType!]
  error: String
}

type O365ConnectionResultType {
  success: Boolean!
  microsoftEmail: String
  error: String
}

type O365ConnectionStatusType {
  isConnected: Boolean!
  microsoftEmail: String
  expiresAt: datetime
  lastUsedAt: datetime
}

input O365SendEmailInput {
  to: [String!]!
  subject: String!
  body: String!
  bodyType: String! = "HTML"
  cc: [String!] = null
  bcc: [String!] = null
}

type O365SendEmailResultType {
  success: Boolean!
  messageId: String
  error: String
}

input OrderBy {
  columnName: String!
  direction: OrderByOperator!
}

enum OrderByOperator {
  ASC
  DESC
}

type OrderResponse {
  id: UUID!
  entryDate: datetime!
  orderNumber: String!
  status: Int!
  balanceId: UUID
  factoryId: UUID
  soldToCustomerId: UUID
  billToCustomerId: UUID
  jobName: String
  entityDate: Date!
  shipDate: Date
  dueDate: Date!
  factSoNumber: String
  userOwnerIds: [UUID!]!
  quoteId: UUID
}

type PreOpportunityBalanceResponse {
  id: UUID!
  subtotal: Decimal!
  total: Decimal!
  quantity: Decimal!
  discount: Decimal!
  discountRate: Decimal!
}

input PreOpportunityDetailInput {
  quantity: Decimal!
  itemNumber: Int!
  unitPrice: Decimal!
  discountRate: Decimal!
  productId: UUID!
  endUserId: UUID!
  id: UUID = null
  productCpnId: UUID = null
  leadTime: String = null
}

type PreOpportunityDetailResponse {
  id: UUID!
  preOpportunityId: UUID!
  quantity: Decimal!
  itemNumber: Int!
  unitPrice: Decimal!
  subtotal: Decimal!
  discountRate: Decimal!
  discount: Decimal!
  total: Decimal!
  productId: UUID!
  productCpnId: UUID
  endUserId: UUID!
  leadTime: String
  product: ProductResponse!
}

input PreOpportunityInput {
  status: PreOpportunityStatus!
  entityNumber: String!
  entityDate: Date!
  soldToCustomerId: UUID!
  details: [PreOpportunityDetailInput!]!
  id: UUID
  expDate: Date
  reviseDate: Date
  acceptDate: Date
  soldToCustomerAddressId: UUID
  billToCustomerId: UUID
  billToCustomerAddressId: UUID
  jobId: UUID
  paymentTerms: String
  customerRef: String
  freightTerms: String
  tags: [String!]
}

type PreOpportunityLandingPage implements LandingPageInterfaceBase {
  id: UUID!
  createdAt: datetime!
  createdBy: String!
  entityNumber: String!
  status: String!
  entityDate: Date!
  expDate: Date
  total: Decimal!
  tags: [String!]
}

type PreOpportunityLiteResponse {
  id: UUID!
  createdAt: datetime!
  createdById: UUID!
  status: PreOpportunityStatus!
  entityNumber: String!
  entityDate: Date!
  expDate: Date
  reviseDate: Date
  acceptDate: Date
  soldToCustomerId: UUID!
  soldToCustomerAddressId: UUID
  billToCustomerId: UUID
  billToCustomerAddressId: UUID
  jobId: UUID
  paymentTerms: String
  customerRef: String
  freightTerms: String
  tags: [String!]
}

type PreOpportunityResponse {
  id: UUID!
  createdAt: datetime!
  createdById: UUID!
  status: PreOpportunityStatus!
  entityNumber: String!
  entityDate: Date!
  expDate: Date
  reviseDate: Date
  acceptDate: Date
  soldToCustomerId: UUID!
  soldToCustomerAddressId: UUID
  billToCustomerId: UUID
  billToCustomerAddressId: UUID
  jobId: UUID
  paymentTerms: String
  customerRef: String
  freightTerms: String
  tags: [String!]
  balance: PreOpportunityBalanceResponse!
  details: [PreOpportunityDetailResponse!]!
  job: JobType
  createdBy: UserResponse!
}

enum PreOpportunityStatus {
  QUALIFIED
  NEGOTIATION
  FOLLOW_UP
  WAITING_ON_FACTORY
  LOST
  WON
}

type ProductResponse {
  id: UUID!
  factoryId: UUID!
  factoryPartNumber: String!
}

type Query {
  _service: _Service!
  address(id: UUID!): AddressResponse!
  addresses(limit: Int! = 100, offset: Int! = 0): [AddressResponse!]!
  addressesByCompany(companyId: UUID!): [AddressResponse!]!
  checkSearch(searchTerm: String!, limit: Int! = 20): [CheckResponse!]!
  findLandingPages(sourceType: LandingSourceType!, filters: [Filter!] = null, orderBy: [OrderBy!] = null, limit: Int = 10, offset: Int = 0): GenericLandingPage!
  company(id: UUID!): CompanyResponse!
  companySearch(searchTerm: String!, limit: Int! = 20): [CompanyResponse!]!
  contact(id: UUID!): ContactResponse!
  contactsByCompany(companyId: UUID!): [ContactResponse!]!
  contactSearch(searchTerm: String!, limit: Int! = 20): [ContactResponse!]!
  customerSearch(searchTerm: String!, published: Boolean! = true, limit: Int! = 20): [CustomerResponse!]!
  factorySearch(searchTerm: String!, published: Boolean! = true, limit: Int! = 20): [FactoryResponse!]!
  gmailAuthUrl(state: String = null): String!
  gmailConnectionStatus: GmailConnectionStatusType!
  o365AuthUrl(state: String = null): String!
  o365ConnectionStatus: O365ConnectionStatusType!
  o365CalendarEvents(top: Int! = 50, skip: Int! = 0): O365CalendarEventsResultType!
  o365CalendarEventsInRange(startDate: datetime!, endDate: datetime!, top: Int! = 100): O365CalendarEventsResultType!
  invoiceSearch(searchTerm: String!, limit: Int! = 20): [InvoiceResponse!]!
  dummyField: String!
  job(id: UUID!): JobType!
  jobStatuses: [JobStatusType!]!
  jobRelatedEntities(jobId: UUID!): JobRelatedEntitiesResponse!
  jobSearch(searchTerm: String!, limit: Int! = 20): [JobType!]!
  jobsByContact(contactId: UUID!): [JobType!]!
  jobsByCompany(companyId: UUID!): [JobType!]!
  link(id: UUID!): LinkRelationType!
  linksByEntity(entityType: CRMEntityType!, entityId: UUID!): [LinkRelationType!]!
  linksFromSource(sourceType: CRMEntityType!, sourceId: UUID!): [LinkRelationType!]!
  linksToTarget(targetType: CRMEntityType!, targetId: UUID!): [LinkRelationType!]!
  note(id: UUID!): NoteType!
  notes(limit: Int! = 20, offset: Int! = 0): [NoteType!]!
  notesByEntity(entityType: CRMEntityType!, entityId: UUID!): [NoteType!]!
  noteConversations(noteId: UUID!): [NoteConversationType!]!
  noteSearch(searchTerm: String!, limit: Int! = 20): [NoteType!]!
  noteRelatedEntities(noteId: UUID!): NoteRelatedEntitiesResponse!
  orderSearch(searchTerm: String!, limit: Int! = 20): [OrderResponse!]!
  preOpportunity(id: UUID!): PreOpportunityResponse!
  preOpportunitySearch(searchTerm: String!, limit: Int! = 20): [PreOpportunityLiteResponse!]!
  productSearch(searchTerm: String!, factoryId: UUID, limit: Int! = 20): [ProductResponse!]!
  quoteSearch(searchTerm: String!, limit: Int! = 20): [QuoteResponse!]!
  task(id: UUID!): TaskType!
  taskConversations(taskId: UUID!): [TaskConversationType!]!
  taskSearch(searchTerm: String!, limit: Int! = 20): [TaskType!]!
  taskRelatedEntities(taskId: UUID!): TaskRelatedEntitiesResponse!
  tasksByEntity(entityType: CRMEntityType!, entityId: UUID!): [TaskType!]!
  userSearch(searchTerm: String!, limit: Int! = 20): [UserResponse!]!
}

type QuoteResponse {
  id: UUID!
  entryDate: datetime!
  quoteNumber: String!
  entityDate: Date!
  createdBy: UUID!
  userOwnerIds: [UUID!]!
  soldToCustomerId: UUID
  billToCustomerId: UUID
  jobName: String
  expDate: Date
  blanket: Boolean!
}

input TaskConversationInput {
  taskId: UUID!
  content: String!
}

type TaskConversationType {
  id: UUID!
  createdAt: datetime!
  taskId: UUID!
  content: String!
}

input TaskInput {
  title: String!
  status: TaskStatus!
  priority: TaskPriority!
  description: String
  assignedToId: UUID
  dueDate: Date
  reminderDate: Date
  tags: [String!]
}

type TaskLandingPage implements LandingPageInterfaceBase {
  id: UUID!
  createdAt: datetime!
  createdBy: String!
  title: String!
  status: TaskStatus!
  priority: TaskPriority!
  description: String
  assignedTo: String
  dueDate: Date
  reminderDate: Date
  tags: [String!]
  linkedTitles: [String!]!
}

enum TaskPriority {
  LOW
  NORMAL
  URGENT
  CRITICAL
}

type TaskRelatedEntitiesResponse {
  jobs: [JobType!]!
  contacts: [ContactResponse!]!
  companies: [CompanyResponse!]!
  notes: [NoteType!]!
  preOpportunities: [PreOpportunityLiteResponse!]!
  quotes: [QuoteResponse!]!
  orders: [OrderResponse!]!
  invoices: [InvoiceResponse!]!
  checks: [CheckResponse!]!
  factories: [FactoryResponse!]!
  products: [ProductResponse!]!
  customers: [CustomerResponse!]!
}

enum TaskStatus {
  TODO
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

type TaskType {
  id: UUID!
  createdAt: datetime!
  title: String!
  status: TaskStatus!
  priority: TaskPriority!
  description: String
  assignedToId: UUID
  dueDate: Date
  reminderDate: Date
  tags: [String!]
  createdBy: UserResponse!
}

scalar UUID

type UserResponse {
  id: UUID!
  firstName: String!
  lastName: String!
  email: String!
  fullName: String!
}

scalar _Any

type _Service {
  sdl: String!
}

"""A date and time"""
scalar datetime
