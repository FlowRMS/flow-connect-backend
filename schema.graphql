type AgreementResponse {
  id: ID!
  connectedOrgId: ID!
  fileName: String!
  fileSize: Int!
  presignedUrl: String!
  createdAt: datetime!
}

enum Application {
  POS
}

type BulkCreateFailureResponse {
  rowNumber: Int!
  organizationName: String!
  alias: String!
  reason: String!
}

type BulkCreateOrganizationAliasesResponse {
  insertedCount: Int!
  failures: [BulkCreateFailureResponse!]!
}

type CategoryConfigResponse {
  category: FieldCategory!
  name: String!
  description: String!
  order: Int!
  visible: Boolean!
}

enum ConnectionStatus {
  DRAFT
  PENDING
  ACCEPTED
  DECLINED
}

input CreateOrganizationAliasInput {
  connectedOrgId: ID!
  alias: String!
}

input CreateOrganizationInput {
  name: String!
  domain: String!
  contact: PosContactInput = null
}

input CreatePrefixPatternInput {
  name: String!
  description: String = null
}

type DashboardIssuesGlance {
  blockingSendsCount: Int!
}

type DashboardLastDeliveryGlance {
  date: datetime!
  recordCount: Int!
}

type DashboardMessagesGlance {
  unreadCount: Int!
}

type DashboardPartnersGlance {
  connectedCount: Int!
  pendingCount: Int!
}

type DownloadReceivedFileResponse {
  url: String!
}

type ExchangeFileResponse {
  id: ID!
  fileName: String!
  fileSize: Int!
  fileType: String!
  rowCount: Int!
  status: ExchangeFileStatusEnum!
  validationStatus: ValidationStatusEnum!
  reportingPeriod: String!
  isPos: Boolean!
  isPot: Boolean!
  createdAt: datetime
  targetOrganizations: [ExchangeFileTargetOrgResponse!]!
}

enum ExchangeFileStatusEnum {
  PENDING
  SENT
}

type ExchangeFileTargetOrgResponse {
  id: ID!
  connectedOrgId: ID!
}

enum FieldCategory {
  TRANSACTION
  SELLING_BRANCH
  TERRITORY
  SHIPPING_BRANCH
  BILL_TO
  PRODUCT_IDENTIFICATION
  QUANTITY_PRICING
  CUSTOM_COLUMNS
}

input FieldInput {
  standardFieldKey: String!
  organizationFieldName: String = null
  manufacturer: Boolean = null
  rep: Boolean = null
  standardFieldName: String = null
  fieldType: FieldType = null
  category: FieldCategory = null
  status: FieldStatus = null
}

enum FieldMapDirection {
  SEND
  RECEIVE
}

type FieldMapFieldResponse {
  id: ID
  standardFieldKey: String!
  category: FieldCategory!
  standardFieldName: String!
  standardFieldNameDescription: String
  organizationFieldName: String
  status: FieldStatus!
  manufacturer: Boolean
  rep: Boolean
  linked: Boolean!
  preferred: Boolean!
  isDefault: Boolean!
  fieldType: FieldType!
  displayOrder: Int!
}

type FieldMapResponse {
  id: ID
  organizationId: ID
  mapType: FieldMapType!
  direction: FieldMapDirection!
  fields: [FieldMapFieldResponse!]!
  categories: [CategoryConfigResponse!]!
}

enum FieldMapType {
  POS
  POT
}

enum FieldStatus {
  REQUIRED
  OPTIONAL
  HIGHLY_SUGGESTED
  ONE_REQUIRED
  CAN_CALCULATE
}

enum FieldType {
  TEXT
  DATE
  DECIMAL
  INTEGER
}

type FileGroupResponse {
  fileId: ID!
  fileName: String!
  items: [FileValidationIssueLiteResponse!]!
  count: Int!
  groups: [ValidationKeyGroupResponse!]!
}

type FileValidationIssueLiteResponse {
  id: ID!
  rowNumber: Int!
  title: String!
  columnName: String
  fileId: ID!
  fileName: String!
}

type FileValidationIssueResponse {
  id: ID!
  rowNumber: Int!
  title: String!
  columnName: String
  validationKey: String!
  message: String!
  fileId: ID!
  fileName: String!
  rowData: JSON
}

type FileValidationIssuesResponse {
  blocking: ValidationIssueGroupResponse!
  warning: ValidationIssueGroupResponse!
  fyi: ValidationIssueGroupResponse!
}

"""The `JSON` scalar type represents JSON values as specified by ECMA-404"""
scalar JSON

type Mutation {
  createConnection(targetOrgId: ID!, draft: Boolean! = false): Boolean!
  inviteConnection(targetOrgId: ID!): Boolean!
  updateConnectionTerritories(connectionId: ID!, subdivisionIds: [ID!]!): UpdateConnectionTerritoriesResponse!
  uploadAgreement(connectedOrgId: ID!, file: Upload!): AgreementResponse!
  deleteAgreement(connectedOrgId: ID!): Boolean!
  createOrganization(input: CreateOrganizationInput!): OrganizationLiteResponse!
  updateOrganizationPreference(application: Application!, key: String!, value: String = null): OrganizationPreferenceResponse!
  saveFieldMap(input: SaveFieldMapInput!): FieldMapResponse!
  createOrganizationAlias(input: CreateOrganizationAliasInput!): OrganizationAliasResponse!
  deleteOrganizationAlias(id: ID!): Boolean!
  bulkSpreadsheetCreateOrganizationAliases(file: Upload!): BulkCreateOrganizationAliasesResponse!
  createPrefixPattern(input: CreatePrefixPatternInput!): PrefixPatternResponse!
  deletePrefixPattern(id: ID!): Boolean!
  uploadExchangeFiles(data: UploadExchangeFileInput!): [ExchangeFileResponse!]!
  deleteExchangeFile(fileId: ID!): Boolean!
  sendPendingExchangeFiles: SendPendingFilesResponse!
  downloadReceivedExchangeFile(fileId: ID!): DownloadReceivedFileResponse!
  ping: String!
}

enum OrgType {
  MANUFACTURER
  DISTRIBUTOR
  REP_FIRM
  ASSOCIATION
  ADMIN_ORG
}

type OrganizationAliasGroupResponse {
  connectedOrgId: ID!
  connectedOrgName: String!
  aliases: [OrganizationAliasResponse!]!
}

type OrganizationAliasResponse {
  id: ID!
  connectedOrgId: ID!
  connectedOrgName: String!
  alias: String!
  createdAt: datetime
}

type OrganizationLiteResponse {
  id: ID!
  name: String!
  domain: String
  members: Int!
  posContactsCount: Int!
  posContacts: [PosContact!]!
  flowConnectMember: Boolean!
  connectionStatus: ConnectionStatus
  agreement: AgreementResponse
  subdivisions: [SubdivisionResponse!]!
}

type OrganizationPreferenceResponse {
  application: Application!
  key: String!
  value: String
}

type PendingFilesStatsResponse {
  fileCount: Int!
  totalRows: Int!
}

type PosContact {
  id: ID!
  name: String
  email: String
}

input PosContactInput {
  email: String!
}

type PosDashboardGlanceResponse {
  issues: DashboardIssuesGlance!
  partners: DashboardPartnersGlance!
  messages: DashboardMessagesGlance!
  lastDelivery: DashboardLastDeliveryGlance
}

type PrefixPatternResponse {
  id: ID!
  name: String!
  description: String
  createdAt: datetime
}

type Query {
  connectionSearch(searchTerm: String!, active: Boolean = true, flowConnectMember: Boolean = null, connected: Boolean = null, limit: Int! = 20, repFirms: Boolean! = false): [OrganizationLiteResponse!]!
  userOrganization: UserOrganizationResponse!
  organizationPreference(application: Application!, key: String!): OrganizationPreferenceResponse
  organizationPreferencesByApplication(application: Application!): [OrganizationPreferenceResponse!]!
  organizationPreferences: [OrganizationPreferenceResponse!]!
  posDashboardGlance: PosDashboardGlanceResponse!
  fieldMap(mapType: FieldMapType!, organizationId: ID = null, direction: FieldMapDirection! = SEND): FieldMapResponse!
  organizationAliases: [OrganizationAliasGroupResponse!]!
  fileValidationIssues: FileValidationIssuesResponse!
  fileValidationIssue(id: ID!): FileValidationIssueResponse
  filteredFileValidationIssues(validationType: ValidationType!, fileId: ID!, validationKey: String!): [FileValidationIssueResponse!]!
  prefixPatterns: [PrefixPatternResponse!]!
  validationRules: [ValidationRuleResponse!]!
  pendingExchangeFiles: [ExchangeFileResponse!]!
  pendingExchangeFilesStats: PendingFilesStatsResponse!
  sentExchangeFiles(period: String = null, organizations: [ID!] = null, isPos: Boolean = null, isPot: Boolean = null): [SentExchangeFilesByPeriodResponse!]!
  receivedExchangeFiles(period: String = null, senders: [ID!] = null, isPos: Boolean = null, isPot: Boolean = null): [ReceivedExchangeFileResponse!]!
  health: String!
}

type ReceivedExchangeFileResponse {
  id: ID!
  senderOrgId: ID!
  senderOrgName: String!
  fileName: String!
  fileSize: Int!
  fileType: String!
  rowCount: Int!
  reportingPeriod: String!
  isPos: Boolean!
  isPot: Boolean!
  status: ReceivedExchangeFileStatusEnum!
  receivedAt: datetime!
}

enum ReceivedExchangeFileStatusEnum {
  NEW
  DOWNLOADED
}

input SaveFieldMapInput {
  mapType: FieldMapType!
  fields: [FieldInput!]!
  organizationId: ID = null
  direction: FieldMapDirection! = SEND
}

type SendPendingFilesResponse {
  success: Boolean!
  filesSent: Int!
}

type SentExchangeFilesByOrgResponse {
  connectedOrgId: ID!
  connectedOrgName: String!
  files: [ExchangeFileResponse!]!
  count: Int!
}

type SentExchangeFilesByPeriodResponse {
  reportingPeriod: String!
  organizations: [SentExchangeFilesByOrgResponse!]!
}

type SubdivisionResponse {
  id: ID!
  name: String!
  isoCode: String!
  countryId: ID!
}

type UpdateConnectionTerritoriesResponse {
  connectionId: ID!
  subdivisions: [SubdivisionResponse!]!
}

"""Represents a file upload."""
scalar Upload

input UploadExchangeFileInput {
  files: [Upload!]!
  reportingPeriod: String!
  isPos: Boolean!
  isPot: Boolean!
  targetOrgIds: [ID!]!
}

type UserOrganizationResponse {
  id: ID!
  name: String!
  orgType: OrgType!
  domain: String
}

type ValidationIssueGroupResponse {
  items: [FileValidationIssueLiteResponse!]!
  count: Int!
  files: [FileGroupResponse!]!
}

type ValidationKeyGroupResponse {
  validationKey: String!
  title: String!
  items: [FileValidationIssueLiteResponse!]!
  count: Int!
}

type ValidationRuleResponse {
  name: String!
  description: String!
  triggers: [String!]!
  validationType: ValidationType!
  enabled: Boolean!
}

enum ValidationStatusEnum {
  NOT_VALIDATED
  VALIDATING
  VALID
  INVALID
}

enum ValidationType {
  STANDARD_VALIDATION
  VALIDATION_WARNING
  AI_POWERED_VALIDATION
}

"""A date and time"""
scalar datetime
